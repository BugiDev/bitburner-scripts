import { CONFIG } from '/config';
import { log } from '/util';
export async function main(ns) {
    const serverName = ns.args[0];
    const debug = (ns.args[1] || false);
    installMalware(ns, serverName, debug);
}
export function installMalware(ns, serverName, debug = false) {
    if (ns.hasRootAccess(serverName) &&
        !ns.fileExists(CONFIG.malwareFile, serverName) &&
        !ns.fileExists(CONFIG.loopMalwareWeaken, serverName) &&
        !ns.fileExists(CONFIG.loopMalwareGrow, serverName) &&
        !ns.fileExists(CONFIG.loopMalwareHack, serverName)) {
        ns.scp(CONFIG.malwareFile, serverName);
        ns.scp(CONFIG.loopMalwareWeaken, serverName);
        ns.scp(CONFIG.loopMalwareGrow, serverName);
        ns.scp(CONFIG.loopMalwareHack, serverName);
        log(ns, `Installed malware on: ${serverName}`, debug);
    }
}
